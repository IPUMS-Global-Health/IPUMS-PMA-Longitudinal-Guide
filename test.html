<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width">
<meta property="og:title" content="test" />






<meta name="description" content="test">

<script id="pandoc-meta" type="application/json">
{"newpage_html_class":"page-break-after","cap-location":"margin","toc-title":"Contents","lof":false,"toc":true,"paged-footnotes":true,"css":["css/layout.css","css/fix-pagedown.css","css/fonts.css"],"lot":false,"output":{"pagedown::html_paged":{"self_contained":false,"toc":true}},"title":"test"}
</script>

<title>test</title>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function() {
  // Retrieve previous config object if defined
  window.PagedConfig = window.PagedConfig || {};
  let beforePaged = PagedConfig.before;
  window.PagedConfig.before = async () => {
    if (beforePaged) await beforePaged();
    return new Promise((resolve, reject) => {
      var script = document.createElement("script");
      script.type = "text/javascript";
      var src = `https://mathjax.rstudio.com/latest/MathJax.js` + "?config=TeX-MML-AM_CHTML";
      if (location.protocol !== "file:" && /^https?:/.test(src))
        src = src.replace(/^https?:/, '');
      script.src = src;
      window.MathJax = {
        AuthorInit: () => {
          MathJax.Hub.Register.StartupHook("Begin", () => {
            MathJax.Hub.Queue(resolve);
          });
        }
      };
      document.getElementsByTagName("head")[0].appendChild(script);
    });
  };
})();
</script>

<link href="test_files/paged-0.19/css/default-fonts.css" rel="stylesheet" />
<link href="test_files/paged-0.19/css/default-page.css" rel="stylesheet" />
<link href="test_files/paged-0.19/css/default.css" rel="stylesheet" />
<script src="test_files/paged-0.19/js/config.js"></script>
<script src="test_files/paged-0.19/js/paged.js"></script>
<script src="test_files/paged-0.19/js/hooks.js"></script>
<script src="test_files/kePrint-0.0.1/kePrint.js"></script>
<link href="test_files/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="css/layout.css" type="text/css" />
<link rel="stylesheet" href="css/fix-pagedown.css" type="text/css" />
<link rel="stylesheet" href="css/fonts.css" type="text/css" />

</head>

<body>

<div class="running-h1-title"></div>

<div class="running-h2-title"></div>



<div class="front-page">
<div id="header" class="title-page">
<h1 class="title">test</h1>
</div>
</div>

<div class="front-matter-container">
<div id="TOC" class="level1 toc front-matter">
<h1 class="toc-title">Contents</h1>
<ul>
<li><a href="#contraceptive-calendar"><span class="toc-section-number">1</span> Contraceptive Calendar</a>
<ul>
<li><a href="#chapter-setup"><span class="toc-section-number">1.1</span> Chapter Setup</a></li>
<li><a href="#century-month-codes-cmc"><span class="toc-section-number">1.2</span> Century Month Codes (CMC)</a></li>
<li><a href="#calendar-length"><span class="toc-section-number">1.3</span> Calendar Length</a></li>
<li><a href="#formatting-calendar-strings"><span class="toc-section-number">1.4</span> Formatting Calendar Strings</a>
<ul>
<li><a href="#merge-phases"><span class="toc-section-number">1.4.1</span> Merge Phases</a></li>
<li><a href="#merge-countries"><span class="toc-section-number">1.4.2</span> Merge Countries</a></li>
<li><a href="#blank-strings"><span class="toc-section-number">1.4.3</span> Blank Strings</a></li>
<li><a href="#split-months-into-columns"><span class="toc-section-number">1.4.4</span> Split Months into Columns</a></li>
<li><a href="#one-row-per-month"><span class="toc-section-number">1.4.5</span> One Row per Month</a></li>
</ul></li>
<li><a href="#analysis"><span class="toc-section-number">1.5</span> Analysis</a>
<ul>
<li><a href="#right-censoring"><span class="toc-section-number">1.5.1</span> Right-censoring</a></li>
<li><a href="#survival-models"><span class="toc-section-number">1.5.2</span> Survival Models</a></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>

<div class="main">
<div id="contraceptive-calendar" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Contraceptive Calendar</h1>
<p>As we’ve seen, PMA panel surveys represent annual interviews that will ultimately include three phases of data collection. Most questions will be repeated for a total of three observations each spaced one year apart. However, some data in PMA panel surveys are reported <em>monthly</em> up to three years prior to the interview in each phase. These data are provided as a comma-delimited character string known as the <strong>Contraceptive Calendar</strong>.</p>
<p>Chapter 6 includes code you can use to parse and analyze data from the <strong>Contraceptive Calendar</strong>. These data are particularly exciting because they offer researchers an opportunity to explore longitudinal analysis techniques like <a href="https://www.stata.com/manuals/st.pdf">survival analysis</a> to model the duration of events like:</p>
<ul>
<li>continuous use (or non-use) of a contraceptive method</li>
<li>birth spacing</li>
<li>pregnancies leading to birth or termination</li>
</ul>
<p>To demonstrate, we’ll test whether women with <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmet need</a> or <a href="https://pma.ipums.org/pma-action/variables/FPPLANWHEN#codes_section">plans to adopt</a> a family planning method at Phase 1 were quicker to begin using one in the months between Phase 1 and Phase 2.</p>
<p>The term “survival analysis” refers to the probability that a person “survives” a particular condition for a given period of time, most commonly in clinical research settings. In the social sciences, this type of analysis is also known as “event history”, “time-to-event”, or “duration” analysis. We use the term “survival” in order to match the terminology used in Stata’s <a href="https://www.stata.com/manuals/st.pdf">survival time</a> commands featured in this chapter.</p>
<div id="chapter-setup" class="section level2" number="1.1">
<h2><span class="header-section-number">1.1</span> Chapter Setup</h2>
<p>Two calendar variables are available for each country in the PMA panel study. The main calendar - which we refer to as the <strong>Contraceptive Calendar</strong> - is named as follows:</p>
<ul>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARBF#codes_section">calendarbf</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARCD#codes_section">calendarcd</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#codes_section">calendarke</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARNG#codes_section">calendarng</a></li>
</ul>
<p>This calendar represents contraceptive use, pregnancy, pregnancy termination, and birth information for each month preceding the interview for the Female Questionnaire in a particular phase of the panel study. Women are asked to recall their status for each month in the calendar period, and their responses are recorded in a single comma-delimited string with the following codes:</p>
<ul>
<li><code>B</code> - Birth</li>
<li><code>P</code> - Pregnant</li>
<li><code>T</code> - Pregnancy ended</li>
<li><code>0</code> - No family planning method used</li>
<li><code>1</code> - Female Sterilization</li>
<li><code>2</code> - Male Sterilization</li>
<li><code>3</code> - Implant</li>
<li><code>4</code> - IUD</li>
<li><code>5</code> - Injectables</li>
<li><code>7</code> - Pill</li>
<li><code>8</code> - Emergency Contraception</li>
<li><code>9</code> - Male Condom</li>
<li><code>10</code> - Female Condom</li>
<li><code>11</code> - Diaphragm</li>
<li><code>12</code> - Foam / Jelly</li>
<li><code>13</code> - Standard Days / Cycle beads</li>
<li><code>14</code> - LAM</li>
<li><code>30</code> - Rhythm method</li>
<li><code>31</code> - Withdrawal</li>
<li><code>39</code> - Other traditional methods</li>
</ul>
<p>For example, consider a woman sampled in Kenya who gave birth during the month of the interview following 8 prior months of pregnancy. If she had used the pill every month up until the month she became pregnant, her string in <a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#codes_section">calendarke</a> would look like this:</p>
<p><code>B,P,P,P,P,P,P,P,P,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7</code></p>
<div class="page-break-after"></div>
<p>The second calendar is the <strong>Discontinuation Calendar</strong>, and it gives the <em>reason why</em> a woman stopped using a contraceptive method for each month following an episode of continuous use. This calendar is represented by the following variables:</p>
<ul>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARBFWHY#codes_section">calendarbfwhy</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARCDWHY#codes_section">calendarcdwhy</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARKEWHY#codes_section">calendarkewhy</a></li>
<li><a href="https://pma.ipums.org/pma-action/variables/CALENDARNGWHY#codes_section">calendarngwhy</a></li>
</ul>
<p>Like the <strong>Contraceptive Calendar</strong>, the <strong>Discontinuation Calendar</strong> is a single comma-delimited string. It contains the following codes for months when a method was discontinued (and is blank otherwise):</p>
<ul>
<li><code>1</code> - Infrequent sex / husband away</li>
<li><code>2</code> - Became pregnant while using</li>
<li><code>3</code> - Wanted to become pregnant</li>
<li><code>4</code> - Husband / partner disapproved</li>
<li><code>5</code> - Wanted more effective method</li>
<li><code>6</code> - Side effects / health concerns</li>
<li><code>7</code> - Lack of access / too far</li>
<li><code>8</code> - Costs too much</li>
<li><code>9</code> - Inconvenient to use</li>
<li><code>10</code> - Up to God / fatalistic</li>
<li><code>11</code> - Difficult to get pregnant / menopausal</li>
<li><code>12</code> - Marital dissolution / separation</li>
<li><code>96</code> - Other</li>
</ul>
<p>Returning to our example, if the same woman reported that she stopped using the pill because she wanted to become pregnant, her string in <code>slink(CALENDARKEWHY)</code> would look like this:</p>
<p><code>,,,,,,,,,3,,,,,,,,,,,,,,,,,,,,,,,,,,</code></p>
<p>Note that the length of the string is padded by blank values before and after the only month in which this woman stopped using the pill. This ensures that <em>all calendars in the same sample contain the same number of values</em> including blanks. Women who were interviewed one month before the final interviews were collected, for example, will always have a blank value for the left-most space on their calendar.</p>
<p>However, calendars from <em>different samples may be different lengths</em>. In this chapter, we’ll demonstrate how to work with a data extract containing multiple samples. To do so,
we will parse the comma-delimited string from each country into multiple columns, and then reshape the data so that one response for each month occupies a single row. Following these steps, you’ll be able to merge and analyze data from calendars collected in multiple countries covering a range of different dates.</p>
<div class="page-break-after"></div>
<p>All six of the currently available longitudinal samples are included in the data extract featured in this chapter (<strong>Female Respondents</strong> only). We’ve selected a <strong>wide</strong> format extract, so that the variables from each phase appear together in the same row. For example, the Kenya contraceptive calendar from Phase 1 is named <a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#codes_section">calendarke_1</a>, while the Kenya contraceptive calendar from Phase 2 is named <a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#codes_section">calendarke_2</a>.</p>
<p>We’ve selected all of the calendar variables listed above, plus these additional variables that we’ll need for our analysis:</p>
<ul>
<li><a href="https://pma.ipums.org/pma-action/variables/RESULTFQ#codes_section">resultfq</a> - Result of female questionnaire</li>
<li><a href="https://pma.ipums.org/pma-action/variables/FQINSTID#codes_section">fqinstid</a> - Unique ID for female questionnaire</li>
<li><a href="https://pma.ipums.org/pma-action/variables/RESIDENT#codes_section">resident</a> - Household residence / membership</li>
<li><a href="https://pma.ipums.org/pma-action/variables/INTFQMON#codes_section">intfqmon</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/INTFQYEAR#codes_section">intfqyear</a> - Date of Female Questionnaire interview</li>
<li><a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETHRC#codes_section">fpcurreffmethrc</a> - Most effective current family planning method (recoded<span id="fn1" class="footnote" style="white-space: pre-line;" data-pagedown-footnote-number="1">The related variable <a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETH#codes_section">fpcurreffmeth</a> reports the most effective method reported by each woman. In <a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETHRC#codes_section">fpcurreffmethrc</a>, these responses are combined with detailed information about her use of the lactational amenorrhea method (LAM), emergency contraception, or specific types of injectable methods.</span>)</li>
<li><a href="https://pma.ipums.org/pma-action/variables/PREGNANT#codes_section">pregnant</a> - Current pregnancy status</li>
<li><a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn</a> - Total unmet need</li>
<li><a href="https://pma.ipums.org/pma-action/variables/FPPLANVAL#codes_section">fpplanval</a> - When will start using FP method in the future - value</li>
<li><a href="https://pma.ipums.org/pma-action/variables/FPPLANWHEN#codes_section">fpplanwhen</a> - When will start using FP method in the future - unit</li>
<li><a href="https://pma.ipums.org/pma-action/variables/KID1STBIRTHMO#codes_section">kid1stbirthmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/KID1STBIRTHYR#codes_section">kid1stbirthyr</a> - Date of first childbirth</li>
<li><a href="https://pma.ipums.org/pma-action/variables/LASTBIRTHMO#codes_section">lastbirthmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/LASTBIRTHYR#codes_section">lastbirthyr</a> - Date of most recent childbirth</li>
<li><a href="https://pma.ipums.org/pma-action/variables/PANELBIRTHMO#codes_section">panelbirthmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/PANELBIRTHYR#codes_section">panelbirthyr</a> - Date of childbirth during the panel study</li>
<li><a href="https://pma.ipums.org/pma-action/variables/OTHERBIRTHMO#codes_section">otherbirthmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/OTHERBIRTHYR#codes_section">otherbirthyr</a> - Date of any other childbirth during the calendar period</li>
<li><a href="https://pma.ipums.org/pma-action/variables/PREGENDMO#codes_section">pregendmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/PREGENDYR#codes_section">pregendyr</a> - Date of most recent pregnancy termination (miscarriage, abortion, or stillbirth)</li>
<li><a href="https://pma.ipums.org/pma-action/variables/PANELPREGENDMO#codes_section">panelpregendmo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/PANELPREGENDYR#codes_section">panelpregendyr</a> - Date of pregnancy termination during the panel study (miscarriage, abortion, or stillbirth)</li>
<li><a href="https://pma.ipums.org/pma-action/variables/FPBEGINUSEMO#codes_section">fpbeginusemo</a> &amp; <a href="https://pma.ipums.org/pma-action/variables/FPBEGINUSEYR#codes_section">fpbeginuseyr</a> - Date of adoption for currently used family planning method</li>
</ul>
<p>We’ll load the data extract into Stata and, following the <strong>Inclusion Criteria for Analysis</strong> described in Chapter 1, we’ll drop cases for women who did not complete the Female Questionnaire or were not members of the <em>de facto</em> population in both phases.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> pma_00122, <span class="kw">clear</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> resultfq_1 == 1 &amp; resultfq_2 == 1</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> resident_1 == 11 | resident_1 == 22</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> resident_2 == 11 | resident_2 == 22</span></code></pre></div>
<p>We’ll also create a two-letter ISO code for each county called <code>country_cal</code>.</p>
<ul>
<li><code>country_cal</code> - Country two-letter ISO code</li>
</ul>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="kw">decode</span> country, <span class="kw">gen</span>(country_cal)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> country_cal = <span class="st">&quot;BF&quot;</span> <span class="kw">if</span> country_cal == <span class="st">&quot;burkina faso&quot;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> country_cal = <span class="st">&quot;CD&quot;</span> <span class="kw">if</span> country_cal == <span class="st">&quot;congo, democratic republic&quot;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> country_cal = <span class="st">&quot;KE&quot;</span> <span class="kw">if</span> country_cal == <span class="st">&quot;kenya&quot;</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> country_cal = <span class="st">&quot;NG&quot;</span> <span class="kw">if</span> country_cal == <span class="st">&quot;nigeria&quot;</span></span></code></pre></div>
<p>Finally, we’ll also create a short ID number for each woman, making it easier for the reader to follow the same individual’s responses throughout several reformatting steps. <strong>This is for display purposes only</strong> - in practice, the 41-character variable <a href="https://pma.ipums.org/pma-action/variables/FQINSTID#codes_section">fqinstid</a> should be used as a unique identifier for each panel member.</p>
<ul>
<li><code>id</code> - Short ID for each panel member (for display only)</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> id = <span class="dt">_n</span>, before(sample_1)</span></code></pre></div>
<p>In order to make this chapter a bit easier to follow, we’re going to omit survey design information - weights and identifiers for samples clusters and strata - featured in previous chapters. It is possible to use Stata <code>svy</code> functions for Cox regression and for parametric survival regression, but we recommend that beginners start with the basics before confronting complex survey design. Confidence intervals shown in this chapter may be narrower as a result.</p>
</div>
<div id="century-month-codes-cmc" class="section level2" number="1.2">
<h2><span class="header-section-number">1.2</span> Century Month Codes (CMC)</h2>
<p>As shown above, we’ll be referencing several variables representing <strong>dates</strong> in this post. Generally, IPUMS PMA publishes every date with two variables: one representing the month (e.g. <a href="https://pma.ipums.org/pma-action/variables/INTFQMON#codes_section">intfqmon</a>) and one representing the year (e.g. <a href="https://pma.ipums.org/pma-action/variables/INTFQYEAR#codes_section">intfqyear</a>). Sometimes, you’ll notice a third variable representing dates with a <strong>century month code (CMC)</strong>: each CMC represents the number of months that have passed between a given date and January 1900. CMC dates are particularly useful for calculating the time between events because they replace two variables (with different units) with one simple integer.</p>
<p>Some CMC variables are available directly from IPUMS PMA (e.g. <a href="https://pma.ipums.org/pma-action/variables/INTFQCMC#codes_section">intfqcmc</a>), but we’ll create our own CMC variables for all of the dates we’ll reference in this post. CMC dates are simply calculated as follows:</p>
<p><span class="math display">\[CMC = Month + 12*(Year – 1900)\]</span></p>
<p>Because all or part of a date may be <strong>missing</strong> (the month or year), and because certain dates may be “NIU (not in universe)” (e.g. “date of most recent childbirth” for women who have never given birth), we’ll need to consider specific circumstances where we should use a missing value (<code>.</code>) in a CMC variable.</p>
<p>In the contraceptive calendar, we’ll be measuring the time between events in <em>months</em>. Therefore, it would be insufficient to include cases where a woman only reported the <em>year</em> in which an event occurred. We’ll create a function that generates missing values (<code>.</code>) if the numeric code representing a month is <code>90</code> or higher (all valid months are coded 1 through 12), and if a year is <code>9000</code> or higher (all valid years are in the 1900s or 2000s). Otherwise, we’ll use the CMC formula to calculate the appropriate CMC value for each date.</p>
<p>We’ll create one <code>cmc</code> for each date in our data extract:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>* Generate CMC variables</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> intfqcmc_1 = intfqmon_1 +12*(intfqyear_1 - 1900) <span class="kw">if</span> <span class="co">///</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                 intfqmon_1 &lt; 90 &amp; intfqyear_1 &lt; 9000</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> intfqcmc_2 = intfqmon_2 +12*(intfqyear_2 - 1900) <span class="kw">if</span> <span class="co">///</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                 intfqmon_2 &lt; 90 &amp; intfqyear_2 &lt; 9000</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> <span class="fu">s</span> <span class="kw">in</span> kid1stbirth lastbirth otherbirth panelbirth <span class="co">///</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>             pregend panelpregend fpbeginuse {</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">gen</span> <span class="ot">`s&#39;</span>cmc_1 = <span class="ot">`s&#39;</span>mo_1 + 12*(<span class="ot">`s&#39;</span>yr_1 - 1900) <span class="kw">if</span> <span class="co">///</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                   <span class="ot">`s&#39;</span>mo_1 &lt; 90 &amp; <span class="ot">`s&#39;</span>yr_1 &lt; 9000</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">gen</span> <span class="ot">`s&#39;</span>cmc_2 = <span class="ot">`s&#39;</span>mo_2 + 12*(<span class="ot">`s&#39;</span>yr_2 - 1900) <span class="kw">if</span> <span class="co">///</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                   <span class="ot">`s&#39;</span>mo_2 &lt; 90 &amp; <span class="ot">`s&#39;</span>yr_2 &lt; 9000                   </span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="page-break-after"></div>
<p>Let’s check our work. For example, consider how we’ve handled <a href="https://pma.ipums.org/pma-action/variables/PANELBIRTHCMC#codes_section">panelbirthcmc_2</a> - the date of a woman’s childbirth that happened during the panel study. If we count the dates by <a href="https://pma.ipums.org/pma-action/variables/PANELBIRTHMO#codes_section">panelbirthmo_2</a> and examine a few rows, we see that one woman reported code <code>97</code> indicating that she did not know the precise month of birth. Meanwhile, there were 15,064 cases coded <code>99</code> indicating that they were “NIU (not in universe)” (no birth occurred during the panel study). We’ve coded both of these case types with missing values (<code>.</code>); all other values follow the CMC formula to count the number of months between January 1900 and the month of birth.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>* List six examples</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="kw">contract</span> panelbirthmo_2 panelbirthyr_2 panelbirthcmc_2, freq(freq)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> -6/-1, <span class="kw">nolabel</span> <span class="kw">noobs</span> sep(6)</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>  +----------------------------------------+
  | pane~o_2   pane~r_2   pane~c_2    freq |
  |----------------------------------------|
  |       12       2017       1416       1 |
  |       12       2018       1428      13 |
  |       12       2019       1440      99 |
  |       12       2020       1452      90 |
  |       97       2017          .       1 |
  |       99       9999          .   15064 |
  +----------------------------------------+</code></pre>
</div>
</div>
<div id="calendar-length" class="section level2" number="1.3">
<h2><span class="header-section-number">1.3</span> Calendar Length</h2>
<p>You may be wondering: why does IPUMS PMA publish a separate calendar variable for <em>each country</em>?</p>
<p>This is because the width of each calendar variable differs according to the number of months women were asked to recall in a particular sample. This, in turn, depends on the range of dates in which women were interviewed for the Female Questionnaire in a particular phase.</p>
<p>You can find the precise range of dates included in each calendar on the <a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#universe_section">description tab</a> for each country’s calendar variable. Here, for example, we see that the Kenya Phase 1 sample includes dates from January 2017 to the month of the interview, and that its Phase 2 sample includes dates from January 2018 to the month of the interview. Note: the two calendars overlap between January 2018 and the Phase 1 interview.</p>
<p><img src="images/startmo.png" width="1121" style="display: block; margin: auto;" /></p>
<div class="page-break-after"></div>
<p>The first month in each country’s calendar is listed below:</p>
<div style="margin-bottom: 1em; margin-top: 0em; border: 0px solid #ddd; padding: 5pxoverflow-x: scroll; width:100%; ">
<table style="width:70%; margin-left: auto; margin-right: auto;" class="table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Start Contraceptive Calendar
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Country
</th>
<th style="text-align:left;">
Phase 1
</th>
<th style="text-align:left;">
Phase 2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Burkina Faso
</td>
<td style="text-align:left;">
Jan 2018
</td>
<td style="text-align:left;">
Jan 2018
</td>
</tr>
<tr>
<td style="text-align:left;">
DRC
</td>
<td style="text-align:left;">
Jan 2017
</td>
<td style="text-align:left;">
Jan 2018
</td>
</tr>
<tr>
<td style="text-align:left;">
Kenya
</td>
<td style="text-align:left;">
Jan 2017
</td>
<td style="text-align:left;">
Jan 2018
</td>
</tr>
<tr>
<td style="text-align:left;">
Nigeria
</td>
<td style="text-align:left;">
Jan 2017
</td>
<td style="text-align:left;">
Jan 2018
</td>
</tr>
</tbody>
</table>
</div>
<p>All women in the same sample were asked to recall events dating backward to a common start date (always in January, as shown above). However, the length of each woman’s calendar will vary depending on the date of her interview. Interviews were collected over a period of months shown in the table below.</p>
<div style="margin-bottom: 1em; margin-top: 0em; border: 0px solid #ddd; padding: 5pxoverflow-x: scroll; width:100%; ">
<table style="width:70%; margin-left: auto; margin-right: auto;" class="table">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="3">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
Stop Contraceptive Calendar
</div>
</th>
</tr>
<tr>
<th style="text-align:left;">
Country
</th>
<th style="text-align:left;">
Phase 1
</th>
<th style="text-align:left;">
Phase 2
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Burkina Faso
</td>
<td style="text-align:left;">
Dec 2019 - Mar 2020
</td>
<td style="text-align:left;">
Dec 2020 - Apr 2021
</td>
</tr>
<tr>
<td style="text-align:left;">
DRC
</td>
<td style="text-align:left;">
Dec 2019 - Feb 2020
</td>
<td style="text-align:left;">
Dec 2020 - Mar 2021
</td>
</tr>
<tr>
<td style="text-align:left;">
Kenya
</td>
<td style="text-align:left;">
Nov 2019 - Dec 2019
</td>
<td style="text-align:left;">
Nov 2020 - Dec 2020
</td>
</tr>
<tr>
<td style="text-align:left;">
Nigeria
</td>
<td style="text-align:left;">
Dec 2019 - Jan 2020
</td>
<td style="text-align:left;">
Dec 2020 - Feb 2021
</td>
</tr>
</tbody>
</table>
</div>
<p>To determine the precise length of each woman’s calendar, we’ll need to create variables for the CMC date of its first month in <code>calstart_1</code> and <code>calstart_2</code>, and also for the CMC date of its last month in <code>calstop_1</code> and <code>calstop_2</code>.</p>
<ul>
<li><code>calstart_1</code> - CMC for a woman’s first calendar month in Phase 1</li>
<li><code>calstop_1</code> - CMC for a woman’s last calendar month in Phase 1</li>
<li><code>calstart_2</code> - CMC for a woman’s first calendar month in Phase 2</li>
<li><code>calstop_2</code> - CMC for a woman’s last calendar month in Phase 2</li>
</ul>
<p>We’ll manually set <code>calstart_1</code> and <code>calstart_2</code> like so:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>* Gen the cmc <span class="fu">date</span> <span class="kw">for</span> the first <span class="fu">month</span> <span class="kw">of</span> each country&#39;s survey</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calstart_1 = 2017</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> calstart_1 = 2018 <span class="kw">if</span> country_cat == <span class="st">&quot;BF&quot;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calstart_2 = 2018</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> calstart_1 = 12*(calstart_1 -1900) + 1</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> calstart_2 = 12*(calstart_2 -1900) + 1</span></code></pre></div>
<div class="page-break-after"></div>
<p><code>calstop_1</code> and <code>calstop_2</code> can be copied directly from the dates we made above for <code>intfqcmc_1</code> and <code>intfqcmc_2</code>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>* Gen vars that cover a <span class="kw">range</span> <span class="kw">of</span> months <span class="kw">in</span> each <span class="kw">sample</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calstop_1 = intfqcmc_1</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calstop_2 = intfqcmc_2</span></code></pre></div>
</div>
<div id="formatting-calendar-strings" class="section level2" number="1.4">
<h2><span class="header-section-number">1.4</span> Formatting Calendar Strings</h2>
<p>Now that we know the appropriate dates for each value in all calendar variables, we’ll begin separating each string into columns. We’ll first want to use <a href="https://www.stata.com/manuals/dreshape.pdf"><code>reshape</code></a> to reformat the dataset so that <em>each calendar variable appears in a separate row</em>, including calendars collected in different phases of the panel study. Let’s save a reformatted dataset named <code>post6_cal1</code>. For now, it will only include <code>id</code>, <a href="https://pma.ipums.org/pma-action/variables/COUNTRY#codes_section">country</a>, and all variables that start with <code>cal</code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> id country_cat cal*</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> post6_cal1, <span class="kw">replace</span></span></code></pre></div>
<p>We’ll reshape the data in two steps. First, we’ll merge data from each Phase one column per country. Second, we’ll merge data from each country into a finally, unified column.</p>
<div id="merge-phases" class="section level3" number="1.4.1">
<h3><span class="header-section-number">1.4.1</span> Merge Phases</h3>
<p>Here, we’ll strip the numeric suffix from each calendar variable: we’ll store this information in a new column called <code>phase</code>. All of the calendar variables from the same phase will then be stored in a separate row (resulting in two rows per woman).</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">long</span> calendarke_ calendarkewhy_ calendarng_ calendarngwhy_ calendarbf_ calendarbfwhy_ calendarcd_ calendarcdwhy_ calstart_ calstop_ , i(id) j(phase)</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarbfwhy_ calendarbfwhy</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarbf_ calendarbf</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarcdwhy_ calendarcdwhy</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarcd_ calendarcd</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarkewhy_ calendarkewhy</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarke_ calendarke</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarng_ calendarng</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarngwhy_ calendarngwhy</span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calstart_ calstart</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calstop_ calstop</span></code></pre></div>
<p>For example, the first three rows are shown: the first row is for the woman with <code>id == 1</code> in <code>phase == 1</code>, while the second row is her <code>phase == 2</code> record. The data for the woman with <code>id == 2</code> begins in row three, as so on.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/3</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +---------------------------------------------------------------------------------+
  1. |   id   |   phase   |   calend~e   |   cal~ewhy   |   calend~g   |   cal~gwhy    |
     |    1   |       1   |              |              |              |               |
     |---------------------------------------------------------------------------------|
     | calendarbf                                                                      |
     |                                   ,,,,,,,,,,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P.. |
     |---------------------------------------------------------------------------------|
     |                                            calendarbfwhy | calend~d | cal~dwhy  |
     |                      ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, |          |           |
     |---------------------------------------------------------------------------------|
     |         countr~l         |         calstart          |         calstop          |
     |               BF         |             1417          |            1442          |
     +---------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------+
  2. |   id   |   phase   |   calend~e   |   cal~ewhy   |   calend~g   |   cal~gwhy    |
     |    1   |       2   |              |              |              |               |
     |---------------------------------------------------------------------------------|
     | calendarbf                                                                      |
     | ,,,,,,,,,,,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,P,P,P,0,0,.. |
     |---------------------------------------------------------------------------------|
     |                                            calendarbfwhy | calend~d | cal~dwhy  |
     |          ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, |          |           |
     |---------------------------------------------------------------------------------|
     |         countr~l         |         calstart          |         calstop          |
     |               BF         |             1417          |            1453          |
     +---------------------------------------------------------------------------------+

     +---------------------------------------------------------------------------------+
  3. |   id   |   phase   |   calend~e   |   cal~ewhy   |   calend~g   |   cal~gwhy    |
     |    2   |       1   |              |              |              |               |
     |---------------------------------------------------------------------------------|
     | calendarbf                                                                      |
     |                                   ,,,,,,,,,,,P,P,P,P,P,P,P,0,0,0,0,0,0,0,3,3,.. |
     |---------------------------------------------------------------------------------|
     |                                            calendarbfwhy | calend~d | cal~dwhy  |
     |                     ,,,,,,,,,,,,,,,,,,,,,,,,,6,,,,,,,,,, |          |           |
     |---------------------------------------------------------------------------------|
     |         countr~l         |         calstart          |         calstop          |
     |               BF         |             1417          |            1441          |
     +---------------------------------------------------------------------------------+</code></pre>
</div>
</div>
<div id="merge-countries" class="section level3" number="1.4.2">
<h3><span class="header-section-number">1.4.2</span> Merge Countries</h3>
<p>Before we reshape a second time, we’ll want to identify suffixes that we can again strip and use as new column names (just as we did with <code>_1</code> and <code>_2</code> when we created <code>phase</code>). Let’s use <code>fpstatus</code> for the main contraceptive calendar, and <code>whystop</code> for the discontinuation calendar. When we <code>reshape long</code> again, these suffixes will appear as two new columns containing each type of calendar.</p>
<ul>
<li><code>fpstatus</code> - Calendar string derived from the main <strong>Contraceptive Calendar</strong></li>
<li><code>whystop</code> - Calendar string derived from the <strong>Discontinuation Calendar</strong></li>
</ul>
<div class="sourceCode" id="cb13"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>* relocate calendarbfwhy calendarbf</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> calendarbf* , before(calendarke)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>* <span class="kw">rename</span> variables</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> i <span class="kw">in</span> calendarbf calendarcd calendarke calendarng {</span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">rename</span> <span class="ot">`i&#39;</span> <span class="ot">`i&#39;</span>fpstatus</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> v <span class="kw">in</span> calendar*why {</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">rename</span> <span class="ot">`v&#39;</span> <span class="ot">`v&#39;</span>stop</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>* <span class="kw">reshape</span> again to <span class="kw">long</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">long</span> calendar@fpstatus calendar@whystop, i(id phase) j(country_cal) <span class="fu">string</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarfpstatus fpstatus</span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> calendarwhystop whystop</span></code></pre></div>
<p>Notice that each woman now occupies <em>eight rows</em>: that’s four country calendars per phase. We’ve also stripped the 2-letter country code from each calendar name to create <code>country_cal</code>: this indicates the country associated with each calendar.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/8</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +----------------------------------------------------------------------------------+
  1. |           id           |           phase           |           country           |
     |            1           |               1           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                   ,,,,,,,,,,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,.. |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                     ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,  |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1442                                      |
     +----------------------------------------------------------------------------------+</code></pre>
<div class="page-break-after"></div>
<pre><code>     +----------------------------------------------------------------------------------+
  2. |           id           |           phase           |           country           |
     |            1           |               1           |                cd           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1442                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  3. |           id           |           phase           |           country           |
     |            1           |               1           |                ke           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1442                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  4. |           id           |           phase           |           country           |
     |            1           |               1           |                ng           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1442                                      |
     +----------------------------------------------------------------------------------+
     +----------------------------------------------------------------------------------+
  5. |           id           |           phase           |           country           |
     |            1           |               2           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     | ,,,,,,,,,,,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,P,P,P,0,0,0.. |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |         ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,  |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+</code></pre>
<div class="page-break-after"></div>
<pre><code>     +----------------------------------------------------------------------------------+
  6. |           id           |           phase           |           country           |
     |            1           |               2           |                cd           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  7. |           id           |           phase           |           country           |
     |            1           |               2           |                ke           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  8. |           id           |           phase           |           country           |
     |            1           |               2           |                ng           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                 whystop  | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+
</code></pre>
</div>
<div class="page-break-after"></div>
<p>Lastly, we can drop any row where <code>country</code> does not match the value in <code>country_cal</code>. The first few rows show that each woman now occupies only two rows apiece.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">upper</span>(country) == country_cat</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/6</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +----------------------------------------------------------------------------------+
  1. |           id           |           phase           |           country           |
     |            1           |               1           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                   ,,,,,,,,,,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,.. |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |                      ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1442                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  2. |           id           |           phase           |           country           |
     |            1           |               2           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     | ,,,,,,,,,,,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,P,P,P,0,0,0.. |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |          ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  3. |           id           |           phase           |           country           |
     |            2           |               1           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                   ,,,,,,,,,,,P,P,P,P,P,P,P,0,0,0,0,0,0,0,3,3,3.. |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |                     ,,,,,,,,,,,,,,,,,,,,,,,,,6,,,,,,,,,, |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1441                                      |
     +----------------------------------------------------------------------------------+</code></pre>
<div class="page-break-after"></div>
<pre><code>     +----------------------------------------------------------------------------------+
  4. |           id           |           phase           |           country           |
     |            2           |               2           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     | ,,,,,,,,,,,,5,5,5,5,5,5,5,5,5,B,P,P,P,P,P,P,P,P,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,.. |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |         ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,6,,,,,,,,,,, |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  5. |           id           |           phase           |           country           |
     |            3           |               1           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                   ,,,,,,,,,,,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.. |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1441                                      |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  6. |           id           |           phase           |           country           |
     |            3           |               2           |                bf           |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                  whystop | countr~l  | calstart  |
     |                                                          |       BF  |     1417  |
     |----------------------------------------------------------------------------------|
     |                                     calstop                                      |
     |                                        1453                                      |
     +----------------------------------------------------------------------------------+</code></pre>
</div>
<p>We’re nearly ready to split each string into more usable variables for our analysis. But, before we do so: you might notice that there are still some calendars represented by empty character strings <code>""</code> (see <code>fpstatus</code> in row 6 above). These are cases where calendar data are not available.</p>
</div>
<div id="blank-strings" class="section level3" number="1.4.3">
<h3><span class="header-section-number">1.4.3</span> Blank Strings</h3>
<p>There are two reasons why a woman’s calendar might be unavailable.</p>
<aside>
The <strong>universe tab</strong> explains why some cases are “NIU (not in universe)”.
</aside>
<p>First, these women might be “NIU (not in universe)”, as described on the IPUMS PMA <a href="https://pma.ipums.org/pma-action/variables/CALENDARKE#universe_section">universe tab</a> for each country’s contraceptive calendar. Generally, NIU cases are women who reported no qualifying event during the calendar period: a blank string could indicate that she was never pregnant and never adopted or discontinued a family planning method in any month during that period.</p>
<p><img src="images/universe2.png" width="1134" style="display: block; margin: auto;" /></p>
<p>Second, a blank might reflect <strong>missing</strong> data, like the duration of a pregnancy or an episode of continuous contraceptive use. Contraceptive calendars <strong>do not contain missing values for individual months</strong>, so you’ll find the complete calendar missing if data from any one month was missing.</p>
<div class="page-break-after"></div>
<p>About 1 in every 5 calendars in our dataset <code>cals</code> is blank <code>""</code> for one of the two reasons mentioned above.</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">gen</span> a <span class="kw">var</span> to indicate <span class="kw">if</span> fpstatus == <span class="st">&quot;&quot;</span> and <span class="kw">proportion</span> <span class="kw">table</span> <span class="kw">of</span> <span class="kw">this</span> <span class="kw">variable</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> empty_fpstatu = fpstatus == <span class="st">&quot;&quot;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="kw">table</span> ( empty_fpstatu ) () (), nototals statistic(<span class="kw">frequency</span>) statistic(<span class="kw">proportion</span>) <span class="fu">missing</span></span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>---------------------------------------
              |  Frequency   Proportion
--------------+------------------------
empty_fpstatu |                        
  0           |     28,153        .7947
  1           |      7,271        .2053
---------------------------------------</code></pre>
</div>
<p>In some research applications, you might want to complete the empty calendars for women who were NIU.</p>
<p>For example: if a woman used the contraceptive pill from the beginning of the calendar period continuously through the day of the interview, her calendar is currently blank because she neither started nor stopped using the pill in that time span. You might want to fill her calendar with the value <code>7</code> repeated once for every month between <code>calstart</code> and <code>calstop</code>.</p>
<p>Similarly, we can complete all calendars for women who never used a family planning method and were never pregnant during the calendar period: in this case, we’ll repeat the value <code>0</code>.</p>
<p>Note, however, that it is <em>not</em> possible to complete calendars for women who experienced birth or pregnancy termination during the calendar period. If these calendars are blank, we cannot determine the duration of the pregnancy or whether any family planning method was used prior to the pregnancy. We’ll flag these cases with a new variable we’ll call <code>calmissing</code>.</p>
<ul>
<li><code>calmissing</code> - Indicates whether a blank calendar cannot be completed from other variables</li>
</ul>
<p>We’ll begin by attaching all of the <code>cmc</code> variables we created above (except <code>intfqcmc</code>) along with the variables <a href="https://pma.ipums.org/pma-action/variables/PREGNANT#codes_section">pregnant</a> and <a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETHRC#codes_section">fpcurreffmethrc</a>. In order to match the format of <code>cals</code>, we’ll again use <code>reshape long</code> to create separate rows for the dates collected from each <code>phase</code>.</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a> post6_filtered_dataset, <span class="kw">clear</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> id *cmc* pregnant* fpcurreffmethrc*</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> intfq*</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>* <span class="kw">reshape</span> to <span class="kw">long</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">unab</span> vars : *_1</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> vars <span class="st">&quot; `vars&#39;&quot;</span> </span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> vars : <span class="fu">subinstr</span> <span class="kw">local</span> vars <span class="st">&quot;_1&quot;</span> <span class="st">&quot; &quot;</span>, <span class="ot">all</span></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">long</span> pregnant_ fpcurreffmethrc_ kid1stbirthcmc_ lastbirthcmc_ <span class="co">///</span></span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>             otherbirthcmc_ panelbirthcmc_ pregendcmc_ panelpregendcmc_ <span class="co">///</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>             fpbeginusecmc_ , i(id) j(phase)</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> pregnant_ pregnant</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> fpcurreffmethrc_ fpcurreffmethrc</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> kid1stbirthcmc_ kid1stbirthcmc</span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> lastbirthcmc_ lastbirthcmc</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> otherbirthcmc_ otherbirthcmc</span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> panelbirthcmc_ panelbirthcmc</span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> pregendcmc_ pregendcmc</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> panelpregendcmc_ panelpregendcmc</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> fpbeginusecmc_ fpbeginusecmc</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>* <span class="kw">merge</span> <span class="kw">this</span> dataset with the dataset we saved <span class="kw">as</span> post6_cal1 <span class="kw">by</span> id and phase</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> 1:1 id phase <span class="kw">using</span> post6_cal1,  nogenerate </span></code></pre></div>
<p>Now, we’ll create <code>calmissing</code> to indicate whether women with an empty value <code>""</code> in <code>fpstatus</code> were <em>actually</em> pregnant or adopted a family planning method at some point during the calendar period. In other words: we’ll test whether any one of our <code>cmc</code> variables shows an event that occurred after <code>calstart</code>, but is not recorded in <code>fpstatus</code>. Likewise, this check will determine whether any such women are <em>currently</em> pregnant.</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">generate</span> calmissing <span class="kw">var</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> criteria = 0</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> v <span class="kw">of</span> <span class="kw">varlist</span> *cmc {</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> criteria  = 1 <span class="kw">if</span> <span class="ot">`v&#39;</span>!= . &amp; <span class="ot">`v&#39;</span> &gt;= calstart</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calmissing = 0, after(phase)</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> calmissing = 1 <span class="kw">if</span> fpstatus == <span class="st">&quot;&quot;</span> &amp; whystop == <span class="st">&quot;&quot;</span> &amp; (pregnant == 1 | criteria == 1)</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> criteria</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>* relocate calstart</span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span> calstart , after(calmissing)</span></code></pre></div>
<p>Let’s take a look at the woman in row 6, where we previously saw a blank string.</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 6</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +----------------------------------------------------------------------------------+
  6. | id | phase | calmis~g | calstart | pregnant  | fpcurr~c  | kid1st~c  | lastbi~c  |
     |  3 |     2 |        0 |     1417 |       no  | niu (not  |        .  |        .  |
     |----------------------------------------------------------------------------------|
     |  otherb~c   |  panelb~c   |  pregen~c   |  panelp~c   |  fpbegi~c   |  country   |
     |         .   |         .   |         .   |         .   |         .   |       bf   |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                     whystop     |    calstop     |
     |                                                                 |       1453     |
     +----------------------------------------------------------------------------------+</code></pre>
</div>
<p>We know that this woman has never given birth because all of the <code>cmc</code> variables related to birth are missing (<code>.</code>); moreover, <code>pregnant == no</code> indicates that she is not currently pregnant. She also has not used contraception, as indicated by <a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETHRC#codes_section">fpcurreffmethrc</a> and <code>fpbeginusecmc</code>. So, we have marked <code>calmissing = 0</code> because it’s safe to auto-complete her calendar with the value <code>0</code> for every month between <code>calstart</code> and <code>calstop</code>.</p>
<p>On the other hand, consider the woman in row 10, whose Phase 2 <code>fpstatus</code> calendar is also an empty string.</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 10</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>+----------------------------------------------------------------------------------+
 10. | id | phase | calmis~g | calstart | pregnant  | fpcurr~c  | kid1st~c  | lastbi~c  |
     |  5 |     2 |        1 |     1417 |       no  | niu (not  |     1366  |     1422  |
     |----------------------------------------------------------------------------------|
     |  otherb~c   |  panelb~c   |  pregen~c   |  panelp~c   |  fpbegi~c   |  country   |
     |         .   |         .   |         .   |         .   |         .   |       bf   |
     |----------------------------------------------------------------------------------|
     | fpstatus                                                                         |
     |                                                                                  |
     |----------------------------------------------------------------------------------|
     |                                                     whystop     |    calstop     |
     |                                                                 |       1453     |
     +----------------------------------------------------------------------------------+</code></pre>
</div>
<p>You can see in <code>lastbirthcmc</code> that she gave birth in month <code>1422</code>, 5 months after
we’d hope to see reported events beginning in <code>calstart == 1417</code>. We have flagged this row with <code>calmissing == 1</code> because we won’t be able to reconstruct her <code>fpstatus</code> calendar without knowing exactly when she became pregnant for this birth, or whether she was using a family planning method in any month prior.</p>
<p>Counting the number of women flagged by <code>calmissing</code> we see that we’ll now be able to reduce the number of missing calendars from 1 in 5 cases to less than 1 in 20.</p>
<p>Prior to this procedure, 1 in 5 rows in <code>cals</code> contained an empty <code>fpstatus</code> calendar. With help from <code>calmissing</code>, we’ll now be able to reduce the proportion of empty calendars to less than 1 in 20.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>* create another <span class="kw">prop</span> <span class="kw">table</span> to <span class="kw">compare</span> with simply <span class="kw">using</span> fpstatus <span class="kw">as</span> criteria</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> empty_fpstatu = fpstatus == <span class="st">&quot;&quot;</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="kw">table</span> ( empty_fpstatu ) ( calmissing ) (), nototals statistic(<span class="kw">frequency</span>) statistic(<span class="kw">proportion</span>) </span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>---------------------------------
               |     calmissing  
               |       0        1
---------------+-----------------
empty_fpstatu  |                 
  0            |                 
    Frequency  |  28,153         
    Proportion |   .7947         
  1            |                 
    Frequency  |   5,811    1,460
    Proportion |    .164   .04121
---------------------------------</code></pre>
</div>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> empty_fpstatu</span></code></pre></div>
<p>We’ll now complete the missing calendars for women who were not flagged by <code>calmissing</code>. First, we’ll recode <code>fpcurreffmethrc</code> to match the values used in the calendar:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>* relabel fpcurreffmethrc</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> fpcur = fpcurreffmethrc</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">define</span> fpcurreffmethrc_code 999 <span class="st">&quot;0&quot;</span> 101 <span class="st">&quot;1&quot;</span> 102 <span class="st">&quot;2&quot;</span> 111 <span class="st">&quot;3&quot;</span> 112 <span class="st">&quot;4&quot;</span> 121 <span class="st">&quot;5&quot;</span> 123 <span class="st">&quot;5&quot;</span> 131 <span class="st">&quot;7&quot;</span> 132 <span class="st">&quot;8&quot;</span> 141 <span class="st">&quot;9&quot;</span> 142 <span class="st">&quot;10&quot;</span> 151 <span class="st">&quot;11&quot;</span> 152 <span class="st">&quot;12&quot;</span> 160 <span class="st">&quot;13&quot;</span> 170 <span class="st">&quot;14&quot;</span> 210 <span class="st">&quot;30&quot;</span> 220 <span class="st">&quot;31&quot;</span> 240 <span class="st">&quot;39&quot;</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">values</span> fpcur fpcurreffmethrc_code</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="kw">decode</span> fpcur, <span class="kw">gen</span>(fpcurreffmethrc_new)</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> fpcur</span></code></pre></div>
<p>Then, we’ll create <code>caldur</code> to calculate the duration (in months) of each woman’s calendar.</p>
<ul>
<li><code>caldur</code> - Duration of a woman’s calendar (in months)</li>
</ul>
<div class="sourceCode" id="cb33"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">gen</span> caldur to calculate the duration <span class="kw">of</span> each woman</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> caldur = calstop - calstart + 1</span></code></pre></div>
<div class="page-break-after"></div>
<p>Finally, we’ll complete each empty string in <code>fpstatus</code> for women not flagged by <code>calmissing</code> (leaving it the same otherwise). To clean-up, we’ll also drop any variables that are no longer needed.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>* Generate a <span class="kw">long</span> <span class="fu">string</span> <span class="kw">of</span> repeated <span class="kw">values</span> <span class="kw">of</span> fpcurreffmethrc_new and </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>* <span class="kw">insert</span> it into fpstatus, <span class="kw">for</span> respondents where fpstatus == <span class="st">&quot;&quot;</span> &amp; calmissing == 0</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">drop</span> longstring </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> longstring = <span class="st">&quot;&quot;</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a><span class="kw">sum</span> caldur</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="kw">forvalues</span> i = 1/<span class="ot">`=r(max)&#39;</span> {</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> longstring = longstring + fpcurreffmethrc_new + <span class="st">&quot;, &quot;</span> <span class="kw">if</span> <span class="ot">`i&#39;</span> &lt;= caldur</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> longstring = <span class="fu">substr</span>(longstring, 1, <span class="fu">strlen</span>(longstring) - 2)</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpstatus = longstring <span class="kw">if</span> <span class="kw">trim</span>(fpstatus) == <span class="st">&quot;&quot;</span> &amp; calmissing == 0</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> longstring</span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a><span class="kw">generate</span> new_string = <span class="fu">subinstr</span>(fpstatus,<span class="st">&quot;  &quot;</span>, <span class="st">&quot;&quot;</span>, .)</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a>* <span class="kw">drop</span> variables</span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> *cmc caldur calstop calmissing pregnant fpcurreffmethrc fpcurreffmethrc_new fpstatus</span></code></pre></div>
</div>
<div id="split-months-into-columns" class="section level3" number="1.4.4">
<h3><span class="header-section-number">1.4.4</span> Split Months into Columns</h3>
<p>We’ve now completed as many of the missing calendars as we can, so it’s time to transform each calendar string into variables that will be usable in survival analysis.</p>
<p>We’ll begin with another <code>reshape</code> command to position <code>fpstatus</code> and <code>whystop</code> together in a single column. Notice the temporary column <code>name</code> describes the type of calendar that appears in the temporary column <code>value</code>.</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">reshape</span> it to <span class="kw">long</span> so one <span class="ot">value</span> per <span class="ot">row</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> new_string value_fpstatus</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> whystop value_whystop</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">long</span> value_, i(id phase) j(<span class="bn">name</span>) <span class="fu">string</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> value_ <span class="ot">value</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/5</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +----------------------------------------------------------------------------------+
  1. |    id     |    phase     |         name     |     calstart     |     country     |
     |     1     |        1     |     fpstatus     |         1417     |          bf     |
     |----------------------------------------------------------------------------------|
     | value                                                                            |
     | ,,,,,,,,,,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,P,P,P,P,0,0,0,0,0                    |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  2. |    id     |    phase     |         name     |     calstart     |     country     |
     |     1     |        1     |      whystop     |         1417     |          bf     |
     |----------------------------------------------------------------------------------|
     | value                                                                            |
     |                     ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,                          |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  3. |    id     |    phase     |         name     |     calstart     |     country     |
     |     1     |        2     |     fpstatus     |         1417     |          bf     |
     |----------------------------------------------------------------------------------|
     | value                                                                            |
     | ,,,,,,,,,,,3,3,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,B,P,P,P,P,P,P,P,0,0,0.. |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  4. |    id     |    phase     |         name     |     calstart     |     country     |
     |     1     |        2     |      whystop     |         1417     |          bf     |
     |----------------------------------------------------------------------------------|
     | value                                                                            |
     | ,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,                                  |
     +----------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------+
  5. |    id     |    phase     |         name     |     calstart     |     country     |
     |     2     |        1     |     fpstatus     |         1417     |          bf     |
     |----------------------------------------------------------------------------------|
     | value                                                                            |
     | ,,,,,,,,,,,P,P,P,P,P,P,P,0,0,0,0,0,0,0,3,3,3,3,3,3,3,3,3,3,3                     |
     +----------------------------------------------------------------------------------+</code></pre>
</div>
<p>Now, we’ll split each string into several columns. Begin by finding the maximum length of any string: you’ll need to create this many columns.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>* calculate the number <span class="kw">of</span> variables we need to <span class="kw">generate</span> <span class="kw">by</span> counting the number <span class="kw">of</span> <span class="st">&quot;,&quot;</span> then plus 1</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> l1 = <span class="fu">length</span>(<span class="ot">value</span>)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> l2= <span class="fu">length</span>(<span class="fu">subinstr</span>(<span class="ot">value</span>,<span class="st">&quot;,&quot;</span>,<span class="st">&quot;&quot;</span>,.))</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tempvalue = <span class="kw">trim</span>(<span class="ot">value</span>)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tempvalue = <span class="fu">subinstr</span>(tempvalue,<span class="st">&quot;,&quot;</span>,<span class="st">&quot;, &quot;</span>,.)</span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="ot">l</span> = l1 - l2</span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">l</span> = <span class="ot">l</span>+1 <span class="kw">if</span> <span class="ot">l</span> != 0</span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a>. <span class="kw">summarize</span> <span class="ot">l</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    Variable |        Obs        Mean    Std. <span class="kw">dev</span>.       Min        Max</span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a>-------------+---------------------------------------------------------</span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a>           <span class="ot">l</span> |     70,848    33.62432    18.14379          0         48</span></code></pre></div>
<p>Next, we’ll split each string into columns. If any given calendar has fewer than 48 values, we’ll fill the remaining columns with blank values as needed.</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="kw">local</span> num = <span class="ot">`r(max)&#39;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>* Insert | into empty spaces <span class="kw">in</span> the <span class="kw">variable</span> named <span class="ot">value</span> </span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>* so we can strip out the commas</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="kw">forvalues</span> i = 1/10 {</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">value</span> = <span class="fu">subinstr</span>(<span class="kw">trim</span>(<span class="ot">value</span>),<span class="st">&quot; &quot;</span>,<span class="st">&quot;&quot;</span>,.)</span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a><span class="kw">forvalues</span> i = 1/10 {</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">value</span> = <span class="fu">subinstr</span>(<span class="ot">value</span>,<span class="st">&quot;,,&quot;</span>,<span class="st">&quot;,|,&quot;</span>,.)</span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">value</span> = <span class="st">&quot;|&quot;</span> + <span class="ot">value</span> <span class="kw">if</span> <span class="fu">substr</span>(<span class="ot">value</span>,1,1) == <span class="st">&quot;,&quot;</span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">value</span> = <span class="ot">value</span> + <span class="st">&quot;|&quot;</span> <span class="kw">if</span> <span class="fu">substr</span>(<span class="ot">value</span>,-1,1) == <span class="st">&quot;,&quot;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">value</span> = <span class="fu">strreverse</span>(<span class="fu">subinstr</span>(<span class="ot">value</span>,<span class="st">&quot;,&quot;</span>,<span class="st">&quot; &quot;</span>,.))</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>*<span class="kw">split</span> <span class="ot">value</span> to variables</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a><span class="kw">forvalues</span> n = 1/<span class="ot">`num&#39;</span> {</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">gen</span> value<span class="ot">`n&#39;</span> = <span class="fu">word</span>(<span class="ot">value</span>,<span class="ot">`n&#39;</span>) <span class="kw">if</span> <span class="ot">`n&#39;</span> &lt;= <span class="ot">l</span> &amp; <span class="fu">word</span>(<span class="ot">value</span>,<span class="ot">`n&#39;</span>) != <span class="st">&quot;|&quot;</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> l1 l2 <span class="ot">l</span> <span class="ot">value</span></span></code></pre></div>
<div class="sourceCode" id="cb39"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span> <span class="kw">in</span> 1</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>     +-----------------------------------------------------------------------------------+
  1. |    id     |     phase     |         name     |     calstart     |     country     |
     |     1     |         1     |     fpstatus     |         1417     |          bf     |
     |-----------------------------------------------------------------------------------|
     | tempvalue                                                                         |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P,.. |
     |-----------------------------------------------------------------------------------|
     | value1 | value2 | value3 | value4 | value5 | value6 | value7  | value8  | value9  |
     |      0 |      0 |      0 |      0 |      0 |      P |      P  |      P  |      P  |
     |-----------------------------------------------------------------------------------|
     | value10 | value11 | value12 | value13 | value14  | value15  | value16  | value17  |
     |       P |       P |       P |       P |       B  |       0  |       0  |       0  |
     |---------+---------+---------+---------+----------+----------+----------+----------|
     | value18 | value19 | value20 | value21 | value22  | value23  | value24  | value25  |
     |       0 |       0 |       0 |       0 |       0  |       0  |       0  |       0  |
     |---------+---------+---------+---------+----------+----------+----------+----------|
     | value26 | value27 | value28 | value29 | value30  | value31  | value32  | value33  |
     |       0 |         |         |         |          |          |          |          |
     |---------+---------+---------+---------+----------+----------+----------+----------|
     | value34 | value35 | value36 | value37 | value38  | value39  | value40  | value41  |
     |         |         |         |         |          |          |          |          |
     |-----------------------------------------------------------------------------------|
     |  value42  |  value43  |  value44  |  value45  |  value46  |  value47  |  value48  |
     |           |           |           |           |           |           |           |
     +-----------------------------------------------------------------------------------+</code></pre>
</div>
<p>As you can see, this produced 48 columns named <code>value48</code> to <code>value1</code>, where <code>value1</code> is the earliest month in chronological time. You’ll notice some empty or missing strings for women whose calendar included empty placeholders (e.g. <code>,,,,,,,3,3,3...</code>).</p>
<p>We’ll now <code>reshape</code> again, placing each month into a single column temporarily called <code>value</code>. The label in <code>name</code> describes whether a particular <code>value</code> originated in the <code>fpstatus</code> or <code>whystop</code> calendar. We strip the numeric suffix from each column to create <code>month</code>, which indicates the sequential month associated with each <code>value</code>.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">reshape</span> to <span class="kw">long</span> again <span class="kw">by</span> <span class="ot">value</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">long</span> <span class="ot">value</span>, i(id phase <span class="bn">name</span>) j(<span class="fu">month</span>)</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/5</span></code></pre></div>
<div style="font-size: 0.7em">
<pre><code>     +----------------------------------------------------------------------------------------------------------+
  1. |     id      |     phase      |         name      |     month      |     calstart      |     country      |
     |      1      |         1      |     fpstatus      |         1      |         1417      |          bf      |
     |----------------------------------------------------------------------------------------------------------|
     |                                                                                        tempvalue | value |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P, P, 0, 0, 0, 0, 0 |     0 |
     +----------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------+
  2. |     id      |     phase      |         name      |     month      |     calstart      |     country      |
     |      1      |         1      |     fpstatus      |         2      |         1417      |          bf      |
     |----------------------------------------------------------------------------------------------------------|
     |                                                                                        tempvalue | value |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P, P, 0, 0, 0, 0, 0 |     0 |
     +----------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------+
  3. |     id      |     phase      |         name      |     month      |     calstart      |     country      |
     |      1      |         1      |     fpstatus      |         3      |         1417      |          bf      |
     |----------------------------------------------------------------------------------------------------------|
     |                                                                                        tempvalue | value |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P, P, 0, 0, 0, 0, 0 |     0 |
     +----------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------+
  4. |     id      |     phase      |         name      |     month      |     calstart      |     country      |
     |      1      |         1      |     fpstatus      |         4      |         1417      |          bf      |
     |----------------------------------------------------------------------------------------------------------|
     |                                                                                        tempvalue | value |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P, P, 0, 0, 0, 0, 0 |     0 |
     +----------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------+
  5. |     id      |     phase      |         name      |     month      |     calstart      |     country      |
     |      1      |         1      |     fpstatus      |         5      |         1417      |          bf      |
     |----------------------------------------------------------------------------------------------------------|
     |                                                                                        tempvalue | value |
     | , , , , , , , , , , 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, B, P, P, P, P, P, P, P, P, 0, 0, 0, 0, 0 |     0 |
     +----------------------------------------------------------------------------------------------------------+

     +----------------------------------------------------------------------------------------------------------+</code></pre>
</div>
<p>From <code>month</code> and <code>calstart</code>, we’ll derive <code>calcmc</code> to mark the <em>calendar</em> month for each <code>value</code>.</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>cals &lt;- cals %&gt;%</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>* <span class="kw">gen</span> calcmc to mark the calendar <span class="fu">month</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> calcmc = calstart + <span class="fu">month</span> - 1</span></code></pre></div>
</div>
<div id="one-row-per-month" class="section level3" number="1.4.5">
<h3><span class="header-section-number">1.4.5</span> One Row per Month</h3>
<p>Finally, we’ll use <code>reshape wide</code> to align the months for each available calendar, and then arrange each woman’s calendar by <code>calcmc</code>. If any month includes no value from either Phase 1 or Phase 2, we’ll remove it from our data frame (these are placeholder values for future months).</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> id phase calcmc <span class="bn">name</span> <span class="ot">value</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>* <span class="kw">reshape</span> <span class="kw">wide</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">wide</span> <span class="ot">value</span>, i(id phase calcmc) j(<span class="bn">name</span>) <span class="fu">string</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="kw">reshape</span> <span class="kw">wide</span> valuefpstatus valuewhystop, i(id calcmc) j(phase)</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> valuefpstatus1 fpstatus_1</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> valuefpstatus2 fpstatus_2</span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> valuewhystop1 whystop_1 </span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> valuewhystop2 whystop_2</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpstatus_1 = <span class="kw">trim</span>(fpstatus_1)</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpstatus_2 = <span class="kw">trim</span>(fpstatus_2)</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>* filter <span class="kw">data</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">missing</span>(fpstatus_1) &amp; fpstatus_2 == <span class="st">&quot;&quot;</span></span></code></pre></div>
<p>In its final format, <code>cals</code> contains one row for every month covered by the contraceptive calendar from either Phase 1 or Phase 2. You’ll notice that the two calendars contain overlapping months, as with the dates between <code>calcmc</code> 1417 and 1442 for the first woman shown below.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>* <span class="kw">sort</span> <span class="kw">by</span> id and descending <span class="kw">by</span> calcmc</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gsort</span> id -calcmc</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/40, <span class="kw">noobs</span></span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>  +---------------------------------------------------------+
  | id   calcmc   fpstat~1   whysto~1   fpstat~2   whysto~2 |
  |---------------------------------------------------------|
  |  1     1453                                3            |
  |  1     1452                                3            |
  |  1     1451                                3            |
  |  1     1450                                3            |
  |  1     1449                                3            |
  |---------------------------------------------------------|
  |  1     1448                                3            |
  |  1     1447                                0            |
  |  1     1446                                0            |
  |  1     1445                                0            |
  |  1     1444                                0            |
  |---------------------------------------------------------|
  |  1     1443                                0            |
  |  1     1442          0                     0            |
  |  1     1441          0                     0            |
  |  1     1440          0                     0            |
  |  1     1439          0                     0            |
  |---------------------------------------------------------|
  |  1     1438          0                     0            |
  |  1     1437          0                     0            |
  |  1     1436          0                     0            |
  |  1     1435          0                     0            |
  |  1     1434          0                     0            |
  |---------------------------------------------------------|
  |  1     1433          0                     0            |
  |  1     1432          0                     0            |
  |  1     1431          0                     0            |
  |  1     1430          B                     B            |
  |  1     1429          P                     P            |
  |---------------------------------------------------------|
  |  1     1428          P                     P            |
  |  1     1427          P                     P            |
  |  1     1426          P                     P            |
  |  1     1425          P                     P            |
  |  1     1424          P                     P            |
  |---------------------------------------------------------|
  |  1     1423          P                     P            |
  |  1     1422          P                     0            |
  |  1     1421          0                     0            |
  |  1     1420          0                     0            |
  |  1     1419          0                     0            |
  |---------------------------------------------------------|
  |  1     1418          0                     0            |
  |  1     1417          0                     0            |
  |  2     1452                                5            |
  |  2     1451                                5            |
  |  2     1450                                5            |
  +---------------------------------------------------------+</code></pre>
</div>
</div>
</div>
<div id="analysis" class="section level2" number="1.5">
<h2><span class="header-section-number">1.5</span> Analysis</h2>
<p>There are many ways to work with the contraceptive calendar data once you’ve formatted it this way. For example, we just saw that the <code>fpstatus_1</code> and <code>fpstatus_2</code> columns are a <em>nearly</em> perfect match for the woman marked <code>id == 1</code>: she reports that she used no method of contraception between month <code>1417</code> until month <code>1421</code>. Then, in Phase 1 she recalled that she became pregnant in month <code>1422</code>; in Phase 2, she instead recalled that she became pregnant in month <code>1423</code>. In both phases, she reports that she gave birth in month <code>1430</code>, and then returned to using no family planning method.</p>
<p>We encourage researchers to explore sources of <strong>recall bias</strong> that may account for discrepancies between the Phase 1 and Phase 2 calendars. Generally, we assume that individuals remember events more reliably when they are in recent memory, but this may not always be true! For more on the reliability of responses in contraceptive calendars across PMA samples, we strongly recommend checking out work by Anglewicz et al. <span class="citation">[-@Anglewicz2022-mx]</span>.</p>
<p>Here, we’d like to highlight just one way that the PMA panel design might help researchers understand patterns in the calendar data. In previous chapters, we saw that IPUMS PMA includes variables indicating whether women had <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmet need</a> or <a href="https://pma.ipums.org/pma-action/variables/FPPLANWHEN#codes_section">plans to adopt</a> a contraceptive method in each phase. We’ll now examine these variables at Phase 1, and use the <strong>Contraceptive Calendar</strong> data from Phase 2 to test whether either factor influences the adoption rate of contraceptive methods reported one year later.</p>
<p>First, we’ll need to identify women who were not using any family planning method at Phase 1. These are cases where <a href="https://pma.ipums.org/pma-action/variables/FPCURREFFMETHRC#codes_section">fpcurreffmethrc_1</a> is coded <code>999</code> for “NIU (not in universe)”. We’ll drop any other cases from our dataset.</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> post6_filtered_dataset, <span class="kw">clear</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> fpcurreffmethrc_1 == 999</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> unmetyn_1 = unmetyn_1 == 1</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>* mutate variables</span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> fpplanyr_1 = 0</span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpplanyr_1 = 1 <span class="kw">if</span> fpplanwhen_1 == 1 &amp; fpplanval_1 &lt;= 12</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpplanyr_1 = 1 <span class="kw">if</span> fpplanwhen_1 == 2 &amp; fpplanval_1 == 1</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> fpplanyr_1 = 1 <span class="kw">if</span> fpplanwhen_1 == 3 | fpplanwhen_1 == 4</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> post6_nonusers, <span class="kw">replace</span></span></code></pre></div>
<p>We’ll follow steps in Chapter 4 to identify women who meet the PMA criteria for “unmet need” in <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn_1</a>, and also those who planned to adopt a family planning method within one year at Phase 1 as shown in <a href="https://pma.ipums.org/pma-action/variables/FPPLANVAL#codes_section">fpplanval_1</a> and <a href="https://pma.ipums.org/pma-action/variables/FPPLANWHEN#codes_section">fpplanwhen_1</a>.</p>
<div class="page-break-after"></div>
<p>We’ll use Stata’s <code>post</code> command to make a dataset listing the joint and marginal probabilities of being in each combination of <a href="https://pma.ipums.org/pma-action/variables/unmetyn#codes_section">unmetyn_1</a> and <a href="https://pma.ipums.org/pma-action/variables/fpplanval#codes_section">fpplanval_1</a> and then use the <code>heatplot</code> program to visualize those probabilities.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="kw">svyset</span> <span class="dt">_n</span>, <span class="kw">strata</span>(country)</span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">postclose</span> toplot</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="kw">tempfile</span> postout</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="kw">postfile</span> toplot unmetyn_1 fpplanyr_1 country margin_u margin_f joint <span class="kw">using</span> <span class="ot">`postout&#39;</span>, <span class="kw">replace</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a><span class="kw">levelsof</span> country, <span class="kw">local</span>(clist)</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> j <span class="kw">in</span> <span class="ot">`clist&#39;</span> {</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">forvalues</span> i = 0/1 {</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">forvalues</span> <span class="kw">k</span> = 0/1 {</span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>            <span class="kw">capture</span> <span class="kw">drop</span> <span class="fu">y</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>            <span class="kw">gen</span> <span class="fu">y</span> = unmetyn_1 == <span class="ot">`i&#39;</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>            <span class="kw">quietly</span> <span class="kw">svy</span>, subpop(<span class="kw">if</span> country == <span class="ot">`j&#39;</span>): <span class="kw">proportion</span> <span class="fu">y</span> </span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>            <span class="kw">local</span> postit (<span class="ot">`i&#39;</span>) (<span class="ot">`k&#39;</span>) (<span class="ot">`j&#39;</span>) (<span class="ot">`=100*r(table)[1,2]&#39;</span>) </span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>            <span class="kw">capture</span> <span class="kw">drop</span> <span class="fu">y</span></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>            <span class="kw">gen</span> <span class="fu">y</span> = fpplanyr_1 == <span class="ot">`k&#39;</span></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>            <span class="kw">quietly</span> <span class="kw">svy</span>, subpop(<span class="kw">if</span> country == <span class="ot">`j&#39;</span>): <span class="kw">proportion</span> <span class="fu">y</span> </span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>            <span class="kw">local</span> postit <span class="ot">`postit&#39;</span> (<span class="ot">`=100*r(table)[1,2]&#39;</span>) </span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>            <span class="kw">capture</span> <span class="kw">drop</span> <span class="fu">y</span></span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>            <span class="kw">gen</span> <span class="fu">y</span> = unmetyn_1 == <span class="ot">`i&#39;</span> &amp; fpplanyr_1 == <span class="ot">`k&#39;</span></span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>            <span class="kw">quietly</span> <span class="kw">svy</span>, subpop(<span class="kw">if</span> country == <span class="ot">`j&#39;</span>): <span class="kw">proportion</span> <span class="fu">y</span> </span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>            <span class="kw">local</span> postit <span class="ot">`postit&#39;</span> (<span class="ot">`=100*r(table)[1,2]&#39;</span>) </span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>            <span class="kw">post</span> toplot <span class="ot">`postit&#39;</span>            </span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb48-26"><a href="#cb48-26" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-27"><a href="#cb48-27" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="kw">postclose</span> toplot</span>
<span id="cb48-28"><a href="#cb48-28" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> <span class="ot">`postout&#39;</span>, <span class="kw">clear</span></span>
<span id="cb48-29"><a href="#cb48-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-30"><a href="#cb48-30" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">define</span> country 1 <span class="st">&quot;BF&quot;</span> 2 <span class="st">&quot;CD&quot;</span> 7 <span class="st">&quot;KE&quot;</span> 9 <span class="st">&quot;NG&quot;</span>, <span class="kw">replace</span></span>
<span id="cb48-31"><a href="#cb48-31" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">values</span> country country</span>
<span id="cb48-32"><a href="#cb48-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-33"><a href="#cb48-33" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span>     margin_f_label = <span class="st">&quot;Plan 1 Yr &quot;</span>     + <span class="fu">string</span>(<span class="fu">round</span>(margin_f,1.1)) + <span class="st">&quot;%&quot;</span> <span class="kw">if</span> fpplanyr_1 == 1</span>
<span id="cb48-34"><a href="#cb48-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> margin_f_label = <span class="st">&quot;No Plan 1 Yr &quot;</span>  + <span class="fu">string</span>(<span class="fu">round</span>(margin_f,1.1)) + <span class="st">&quot;%&quot;</span> <span class="kw">if</span> fpplanyr_1 == 0</span>
<span id="cb48-35"><a href="#cb48-35" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span>     margin_u_label = <span class="st">&quot;Unmet Need &quot;</span>    + <span class="fu">string</span>(<span class="fu">round</span>(margin_u,1.1)) + <span class="st">&quot;%&quot;</span> <span class="kw">if</span> unmetyn_1 == 1</span>
<span id="cb48-36"><a href="#cb48-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> margin_u_label = <span class="st">&quot;No Unmet Need &quot;</span> + <span class="fu">string</span>(<span class="fu">round</span>(margin_u,1.1)) + <span class="st">&quot;%&quot;</span> <span class="kw">if</span> unmetyn_1 == 0</span></code></pre></div>
<div class="page-break-after"></div>
<p>Before we begin our analysis, let’s see the proportion of <code>nonusers</code> in each country who had unmet need or plans to adopt a family planning method within one year at Phase 1.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>* Make four sub-plots</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a><span class="kw">foreach</span> c <span class="kw">in</span> 1 2 7 9 {    </span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>    heatplot joint margin_f_label margin_u_label <span class="kw">if</span> country == <span class="ot">`c&#39;</span>, <span class="co">///</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>        <span class="bn">legend</span>(<span class="kw">off</span>) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb49-6"><a href="#cb49-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">values</span>(<span class="kw">format</span>(%4.1f)) <span class="co">///</span></span>
<span id="cb49-7"><a href="#cb49-7" aria-hidden="true" tabindex="-1"></a>        cuts(5 10 15 20 25) <span class="co">///</span></span>
<span id="cb49-8"><a href="#cb49-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">color</span>(purples, intensity(0.6)) <span class="co">///</span></span>
<span id="cb49-9"><a href="#cb49-9" aria-hidden="true" tabindex="-1"></a>        discrete <span class="co">///</span></span>
<span id="cb49-10"><a href="#cb49-10" aria-hidden="true" tabindex="-1"></a>        <span class="kw">xlabel</span>(,  <span class="bn">labsize</span>(small) angle(45)) <span class="co">///</span></span>
<span id="cb49-11"><a href="#cb49-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">ylabel</span>(,  <span class="bn">labsize</span>(small)) <span class="co">///</span></span>
<span id="cb49-12"><a href="#cb49-12" aria-hidden="true" tabindex="-1"></a>        <span class="bn">subtitle</span>(<span class="st">&quot;`: label country `c&#39;&#39;&quot;</span>, <span class="kw">size</span>(small)) <span class="co">///</span></span>
<span id="cb49-13"><a href="#cb49-13" aria-hidden="true" tabindex="-1"></a>        <span class="bn">xtitle</span>(<span class="st">&quot;&quot;</span>) <span class="bn">ytitle</span>(<span class="st">&quot;&quot;</span>) <span class="co">///</span></span>
<span id="cb49-14"><a href="#cb49-14" aria-hidden="true" tabindex="-1"></a>        <span class="bn">name</span>(hm<span class="ot">`c&#39;</span>, <span class="kw">replace</span>)</span>
<span id="cb49-15"><a href="#cb49-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb49-16"><a href="#cb49-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-17"><a href="#cb49-17" aria-hidden="true" tabindex="-1"></a>* Combine them together</span>
<span id="cb49-18"><a href="#cb49-18" aria-hidden="true" tabindex="-1"></a><span class="kw">graph</span> <span class="bn">combine</span> hm1 hm2 hm7 hm9, <span class="co">///</span></span>
<span id="cb49-19"><a href="#cb49-19" aria-hidden="true" tabindex="-1"></a>    <span class="bn">rows</span>(2) <span class="co">///</span></span>
<span id="cb49-20"><a href="#cb49-20" aria-hidden="true" tabindex="-1"></a>    <span class="bn">title</span>(<span class="st">&quot;Non-users: Unmet Need and Intentions to Adopt a Method within 1 Year&quot;</span>, <span class="kw">size</span>(medium)) <span class="co">///</span></span>
<span id="cb49-21"><a href="#cb49-21" aria-hidden="true" tabindex="-1"></a>    <span class="bn">subtitle</span>(<span class="st">&quot;Unweighted percentage among sampled women not currently using any method at Phase 1&quot;</span>, <span class="kw">size</span>(small)) <span class="co">///</span></span>
<span id="cb49-22"><a href="#cb49-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">note</span>(<span class="st">&quot;Percentages in each plot sum to 100%.&quot;</span>, <span class="kw">size</span>(vsmall)) <span class="co">///</span></span>
<span id="cb49-23"><a href="#cb49-23" aria-hidden="true" tabindex="-1"></a>    graphregion(<span class="kw">color</span>(<span class="bn">white</span>))</span></code></pre></div>
<p><img src="images/f6_01.png" width="100%" style="display: block; margin: auto;" /></p>
<p>As you can see, a majority of Phase 1 non-users in each country had both no unmet need and no plans to adopt a method within the next year. We might expect these women to be <em>least likely</em> to adopt a method within the subsequent months covered by the Phase 2 contraceptive calendar.</p>
<p>Conversely, we might expect women who planned to adopt a method would be <em>most likely</em> to adopt one within the year, but also that this might be mitigated by factors related to unmet need.</p>
<p>Let’s now attach the contraceptive calendar data we formatted above. We’ll exclude months before <code>intfqcmc_1</code> and women we identified with <code>calmissing</code> where all values in <code>fpstatus_2</code> are now missing (<code>.</code>). Finally, we’ll exclude women for whom either <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn_1</a> or <a href="https://pma.ipums.org/pma-action/variables/FPPLANYR#codes_section">fpplanyr_1</a> is missing (<code>.</code>), NIU, or otherwise unavailable.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> post6_nonusers, <span class="kw">clear</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>* <span class="kw">keep</span> only certain variables</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> id country intfqcmc_1 unmetyn_1 fpplanyr_1</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> post6_nonuser, <span class="kw">replace</span></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>* <span class="kw">merge</span> post6_nonuser and post6_cals</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> post6_cals, <span class="kw">clear</span></span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="fu">m</span>:1 id <span class="kw">using</span> post6_nonuser, nogenerate </span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>* only <span class="kw">keep</span> months after intfqcmc_1 and exclude women <span class="kw">for</span> whom either </span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>* UNMETYN_1 <span class="kw">or</span> FPPLANYR_1 is <span class="fu">missing</span>, NIU, <span class="kw">or</span> otherwise coded NA</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> calcmc &gt;= intfqcmc_1</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> !<span class="fu">missing</span>(fpstatus_2) &amp; !<span class="fu">missing</span>(unmetyn_1) &amp; !<span class="fu">missing</span>(fpplanyr_1)</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> <span class="kw">in</span> 1/20, <span class="kw">noobs</span></span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>+----------------------------------------------------------------------------------------------------+
  | id   calcmc   fpstat~1   whysto~1   fpstat~2   whysto~2   country   unmety~1   intfqc~1   fpplan~1 |
  |----------------------------------------------------------------------------------------------------|
  |  1     1453                                3              burkina   no unmet       1442          1 |
  |  1     1452                                3              burkina   no unmet       1442          1 |
  |  1     1451                                3              burkina   no unmet       1442          1 |
  |  1     1450                                3              burkina   no unmet       1442          1 |
  |  1     1449                                3              burkina   no unmet       1442          1 |
  |----------------------------------------------------------------------------------------------------|
  |  1     1448                                3              burkina   no unmet       1442          1 |
  |  1     1447                                0              burkina   no unmet       1442          1 |
  |  1     1446                                0              burkina   no unmet       1442          1 |
  |  1     1445                                0              burkina   no unmet       1442          1 |
  |  1     1444                                0              burkina   no unmet       1442          1 |
  |----------------------------------------------------------------------------------------------------|
  |  1     1443                                0              burkina   no unmet       1442          1 |
  |  1     1442          0                     0              burkina   no unmet       1442          1 |
  |  2     1452                                5              burkina   no unmet       1441          0 |
  |  2     1451                                5              burkina   no unmet       1441          0 |
  |  2     1450                                5              burkina   no unmet       1441          0 |
  |----------------------------------------------------------------------------------------------------|
  |  2     1449                                5              burkina   no unmet       1441          0 |
  |  2     1448                                5              burkina   no unmet       1441          0 |
  |  2     1447                                5              burkina   no unmet       1441          0 |
  |  2     1446                                5              burkina   no unmet       1441          0 |
  |  2     1445                                5              burkina   no unmet       1441          0 |
  +----------------------------------------------------------------------------------------------------+
</code></pre>
</div>
<div id="right-censoring" class="section level3" number="1.5.1">
<h3><span class="header-section-number">1.5.1</span> Right-censoring</h3>
<p>A key concept in survival analysis is the idea of <strong>right-censoring</strong>, which refers to cases where the event of interest happens after the last observation point (or no at all). It’s important that we identify these cases now so that we don’t mistake them for women who first adopted a method during the month of the Phase 2 interview.</p>
<p>First, we’ll want to identify the earliest month in which each woman reported using a method, if she did so at all. To do this, we’ll begin by identifying months of contraceptive <code>USE</code> as those where <code>FPSTATUS_2</code> contains any value other than <code>0</code>, <code>B</code>, <code>P</code>, or <code>T</code>.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> mo = calcmc - intfqcmc_1</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="kw">use</span> = fpstatus_2 != <span class="st">&quot;0&quot;</span> &amp; fpstatus_2 != <span class="st">&quot;B&quot;</span> &amp; fpstatus_2 != <span class="st">&quot;P&quot;</span> &amp; fpstatus_2 != <span class="st">&quot;T&quot;</span></span></code></pre></div>
<p>Above, we saw that 6 months pass before the woman with <code>id == 1</code> adopts a a method (code <code>3</code> for implant). However, some women <em>never</em> adopt a method before the Phase 2 interview. These cases are right-censored.</p>
<p>Ultimately, we’ll want to include only one row for each woman in our analysis. For those who adopted a method, we’ll need to find the earliest month of <code>use</code>. For right-censored cases, we’ll include only the month of the Phase 2 interview.</p>
<p>We begin by numbering each month in a variable call <code>mo</code>, counting upward from <code>0</code> for the Phase 1 interview. We’ll then create an exact copy of <code>mo</code> called <code>usemo</code> that is missing (<code>.</code>) for months of non-<code>use</code>.</p>
<p>The minimum value in <code>usemo</code> is the month of adoption, and we’ll flag this month with a variable called <code>adopt</code>. However, if <em>no method was adopted</em> we’ll need to flag the maximum value in <code>mo</code> with both <code>adopt</code> <em>and</em> an additional variable indicating that the case is right-censored. This final variable, which we’ll call <code>rc</code>, helps Stata distinguish women who never adopted a method before Phase 2.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">gen</span> usemo = mo <span class="kw">if</span> <span class="kw">use</span> == 1</span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">egen</span> use_sum = <span class="kw">sum</span>(<span class="kw">use</span>)</span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">egen</span> adopt = <span class="fu">min</span>(usemo) <span class="kw">if</span> use_sum &gt;= 1</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">egen</span> adopt2 = <span class="fu">max</span>(mo) <span class="kw">if</span> use_sum == 0</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> adopt = adopt2 <span class="kw">if</span> <span class="fu">missing</span>(adopt)</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> adopt2 use_sum</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">gen</span> rc = 1 <span class="kw">if</span> adopt == mo &amp; <span class="kw">use</span> == 0</span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="kw">bysort</span> id: <span class="kw">replace</span> rc = 0 <span class="kw">if</span> adopt == mo &amp; <span class="kw">use</span> == 1</span></code></pre></div>
<p>Finally, we’ll now drop every row except for those matching <code>adopt</code>. This leaves one row for each woman.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> adopt == mo</span></code></pre></div>
</div>
<div id="survival-models" class="section level3" number="1.5.2">
<h3><span class="header-section-number">1.5.2</span> Survival Models</h3>
<p>We’ll now fit three survival models predicting the duration of continuous non-use for the women in our dataset: one model for <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn_1</a>, one for <a href="https://pma.ipums.org/pma-action/variables/FPPLANYR#codes_section">fpplanyr_1</a>, and one for their interaction effect, which we’ll call <code>interact_1</code>. For each model, <code>sts list</code> reports the likelihood that a baseline non-user would have adopted any family planning method for each month in the calendar period.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span>     interact_1 = <span class="st">&quot;Unmet Need, Plan 1 Yr&quot;</span>       <span class="kw">if</span> unmetyn_1 == 1 &amp; fpplanyr_1 == 1</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> interact_1 = <span class="st">&quot;Unmet Need, No Plan 1 Yr&quot;</span>    <span class="kw">if</span> unmetyn_1 == 1 &amp; fpplanyr_1 == 0</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> interact_1 = <span class="st">&quot;No Unmet Need, Plan 1 Yr&quot;</span>    <span class="kw">if</span> unmetyn_1 == 0 &amp; fpplanyr_1 == 1</span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> interact_1 = <span class="st">&quot;No Unmet Need, No Plan 1 Yr&quot;</span> <span class="kw">if</span> unmetyn_1 == 0 &amp; fpplanyr_1 == 0</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> post6_survival,<span class="kw">replace</span></span></code></pre></div>
<p>To run the survival time statistics (sts) or time-to-event analysis commands in Stata, we generate a variable that indicates whether the respondent experienced the event of interest. In our case, if <code>rc</code> is not 1, then they adopted a family planning methods, so our variable that indicates they had the event will be <code>notrc</code>. Similarly, generate a variable indicating the time when they entered observation in the study. Stata’s survival analysis commands do not expect to see failures in the very first period of observation, but this dataset has quite a few women who were not using contraception at the time of the Phase 1 interview but who remember adopting it that very month (<code>mo = 0</code>) so we increment the <code>mo</code> variable by one month (in these instances, women may have adopted a method just days or a few weeks after the Phast 1 interview, but before a full month had passed).</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> notrc = !rc</span></code></pre></div>
<div class="page-break-after"></div>
<p>Now we tell Stata how to treat this data with survival analysis commands, using the <a href="https://www.stata.com/manuals/ststset.pdf"><code>stset</code> command</a>. The arguments here indicate that <code>mo</code> is the time variable, and that <code>notrc</code> is the variable that indicates which participants experienced the event of interest. The command returns a summary of what it sees in the dataset.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="kw">stset</span> mo, failure(notrc ) origin(<span class="fu">min</span>)</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>Survival-time data settings

         Failure event: notrc!=0 &amp; notrc&lt;.
Observed time interval: (origin, mo]
     Exit on or before: failure
     Time for analysis: (time-origin)
                Origin: min

--------------------------------------------------------------------------
      9,206  total observations
          0  exclusions
--------------------------------------------------------------------------
      9,206  observations remaining, representing
      2,245  failures in single-record/single-failure data
     98,758  total analysis time at risk and under observation
                                                At risk from t =         0
                                     Earliest observed entry t =         0
                                          Last observed exit t =        16</code></pre>
</div>
<div class="page-break-after"></div>
<p>Let’s start with the model featuring <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn_1</a>.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="ot">list</span> <span class="kw">if</span> co == 1, failure <span class="kw">by</span>(unmetyn_1 )</span></code></pre></div>
<div style="font-size: 0.8em">
<pre><code>        Failure _d: notrc
  Analysis time _t: (mo-origin)
            Origin: min

Kaplan–Meier failure function
By variable: unmetyn_1

             At           Net     Failure      Std.
  Time     risk   Fail   lost    function     error     [95% conf. int.]
------------------------------------------------------------------------
no unmet need 
     1     2245    157      0      0.0699    0.0054     0.0601    0.0813
     2     2088     20      0      0.0788    0.0057     0.0684    0.0908
     3     2068     21      0      0.0882    0.0060     0.0772    0.1007
     4     2047     25      0      0.0993    0.0063     0.0877    0.1125
     5     2022     27      0      0.1114    0.0066     0.0990    0.1251
     6     1995     22      0      0.1212    0.0069     0.1083    0.1354
     7     1973     27      0      0.1332    0.0072     0.1198    0.1479
     8     1946     26      0      0.1448    0.0074     0.1309    0.1600
     9     1920     30      0      0.1581    0.0077     0.1437    0.1739
    10     1890     37      0      0.1746    0.0080     0.1595    0.1910
    11     1853     35     97      0.1902    0.0083     0.1746    0.2071
    12     1721     27    906      0.2029    0.0085     0.1868    0.2202
    13      788      5    687      0.2080    0.0087     0.1914    0.2257
    14       96      3     70      0.2327    0.0164     0.2024    0.2668
    15       23      0     23      0.2327    0.0164     0.2024    0.2668
unmet need 
     1      632     86      0      0.1361    0.0136     0.1116    0.1653
     2      546     15      0      0.1598    0.0146     0.1335    0.1908
     3      531      6      0      0.1693    0.0149     0.1422    0.2009
     4      525      9      0      0.1835    0.0154     0.1555    0.2160
     5      516      6      0      0.1930    0.0157     0.1643    0.2260
     6      510     13      0      0.2136    0.0163     0.1837    0.2477
     7      497     11      0      0.2310    0.0168     0.2001    0.2659
     8      486     12      0      0.2500    0.0172     0.2181    0.2857
     9      474     11      0      0.2674    0.0176     0.2347    0.3037
    10      463     15      0      0.2911    0.0181     0.2574    0.3283
    11      448      8     21      0.3038    0.0183     0.2696    0.3413
    12      419     11    257      0.3221    0.0186     0.2871    0.3601
    13      151      1    135      0.3266    0.0190     0.2908    0.3654
    14       15      1     12      0.3715    0.0469     0.2875    0.4707
    15        2      0      2      0.3715    0.0469     0.2875    0.4707
------------------------------------------------------------------------
Note: Net lost equals the number lost minus the number who entered.</code></pre>
</div>
<p>The column <code>At risk</code> shows the total number of non-users remaining after the number of months passed in <code>time</code>. The column <code>Failure function</code> shows the estimated probability that a randomly selected woman would adopt a form of contraception in that month. The final two columns report a 95% confidence interval by default.</p>
<p>For example, row 1 shows that there were 2245 women in the Phase 1 Burkina Faso sample who were not using family planning and did not meet PMA criteria for “unmet need”. Among these, <code>Fail</code> shows that 157 adopted a family planning method within one month following the Phase 1 interview. If 7.0% adopted a method, then 93.0% of the group remain in the <code>At risk</code> pool before one month had passed.</p>
<p>Below that, row 16 shows that there were 632 women in the Phase 1 Burkina Faso sample who were not using family planning, but <em>did</em> meet PMA criteria for “unmet need”. Among these, <code>Fail</code> shows that 86 adopted a family planning method less than one month after the interview: this leaves 86.4% of the group remaining before one month had passed.<span id="fn2" class="footnote" style="white-space: pre-line;" data-pagedown-footnote-number="2">As a reminder: these estimates are not weighted, and the confidence intervals do not account for the PMA cluster sampling procedure.</span></p>
<p>We’ll produce a “time-to-event” plot by inverting the probabilities reported in <code>Failure function</code> and its accompanying confidence interval. This plot uses <a href="https://www.stata.com/manuals/ststsgraph.pdf"><code>sts graph</code></a> to draw two step-wise functions: one for those with unmet need at Phase 1 and those with no unmet need. The command also shows a shaded confidence interval for each step. The code constructs a separate figure for each country and uses the <code>grc1leg</code> command to combine the figures into a single figure and show only a single legend.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 1, failure <span class="kw">by</span>(unmetyn_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Burkina Faso, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No unmet need&quot;</span> 3 <span class="st">&quot;Unmet need&quot;</span>) <span class="co">///</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm1, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small)) </span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 2, failure <span class="kw">by</span>(unmetyn_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(DR Congo, <span class="kw">size</span>(small))     graphregion(<span class="kw">color</span>(<span class="bn">white</span>))   <span class="co">///</span></span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="co">///</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No unmet need&quot;</span> 3 <span class="st">&quot;Unmet need&quot;</span>) <span class="co">///</span></span>
<span id="cb61-12"><a href="#cb61-12" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm2, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb61-13"><a href="#cb61-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-14"><a href="#cb61-14" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 7, failure <span class="kw">by</span>(unmetyn_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb61-15"><a href="#cb61-15" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Kenya, <span class="kw">size</span>(small))        graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb61-16"><a href="#cb61-16" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb61-17"><a href="#cb61-17" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No unmet need&quot;</span> 3 <span class="st">&quot;Unmet need&quot;</span>) <span class="co">///</span></span>
<span id="cb61-18"><a href="#cb61-18" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm3, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb61-19"><a href="#cb61-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-20"><a href="#cb61-20" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 9, failure <span class="kw">by</span>(unmetyn_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb61-21"><a href="#cb61-21" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Nigeria, <span class="kw">size</span>(small))      graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb61-22"><a href="#cb61-22" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb61-23"><a href="#cb61-23" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No unmet need&quot;</span> 3 <span class="st">&quot;Unmet need&quot;</span>) <span class="co">///</span></span>
<span id="cb61-24"><a href="#cb61-24" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm4, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb61-25"><a href="#cb61-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-26"><a href="#cb61-26" aria-hidden="true" tabindex="-1"></a>grc1leg  hm1 hm2 hm3 hm4, <span class="bn">rows</span>(2) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="bn">legend</span>(hm1) <span class="co">///</span></span>
<span id="cb61-27"><a href="#cb61-27" aria-hidden="true" tabindex="-1"></a><span class="bn">title</span>(Predicted Time to FP Adoption <span class="kw">by</span> Phase 1 Unmet Need Status, <span class="kw">size</span>(small)) <span class="co">///</span></span>
<span id="cb61-28"><a href="#cb61-28" aria-hidden="true" tabindex="-1"></a><span class="bn">xcommon</span> <span class="bn">ycommon</span></span></code></pre></div>
<p><img src="images/f6_02.png" width="100%" style="display: block; margin: auto;" /></p>
<p>In general, we see evidence that non-users with unmet need at Phase 1 were significantly quicker to adopt a method compared to women with no unmet need in each country.</p>
<p>Let’s now consider how the adoption rate might be influenced to by <a href="https://pma.ipums.org/pma-action/variables/FPPLANYR#codes_section">fpplanyr_1</a>.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 1, failure <span class="kw">by</span>(fpplanyr_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Burkina Faso, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No plan 1yr&quot;</span> 3 <span class="st">&quot;Plan 1yr&quot;</span>) <span class="co">///</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm1, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 2, failure <span class="kw">by</span>(fpplanyr_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(DR Congo, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No plan 1yr&quot;</span> 3 <span class="st">&quot;Plan 1yr&quot;</span>) <span class="co">///</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm2, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 7, failure <span class="kw">by</span>(fpplanyr_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb62-15"><a href="#cb62-15" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Kenya, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb62-16"><a href="#cb62-16" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb62-17"><a href="#cb62-17" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No plan 1yr&quot;</span> 3 <span class="st">&quot;Plan 1yr&quot;</span>) <span class="co">///</span></span>
<span id="cb62-18"><a href="#cb62-18" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm3, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb62-19"><a href="#cb62-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-20"><a href="#cb62-20" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 9, failure <span class="kw">by</span>(fpplanyr_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb62-21"><a href="#cb62-21" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Nigeria, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb62-22"><a href="#cb62-22" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb62-23"><a href="#cb62-23" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="kw">order</span>(1 <span class="st">&quot;No plan 1yr&quot;</span> 3 <span class="st">&quot;Plan 1yr&quot;</span>) <span class="co">///</span></span>
<span id="cb62-24"><a href="#cb62-24" aria-hidden="true" tabindex="-1"></a><span class="ot">row</span>(1)) <span class="bn">name</span>(hm4, <span class="kw">replace</span>) <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb62-25"><a href="#cb62-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-26"><a href="#cb62-26" aria-hidden="true" tabindex="-1"></a>grc1leg  hm1 hm2 hm3 hm4, <span class="bn">rows</span>(2) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="bn">legend</span>(hm1) <span class="co">///</span></span>
<span id="cb62-27"><a href="#cb62-27" aria-hidden="true" tabindex="-1"></a><span class="bn">title</span>(Predicted Time to FP Adoption <span class="kw">by</span> Intentions Within 1 Year <span class="kw">of</span> Phase 1, <span class="co">///</span></span>
<span id="cb62-28"><a href="#cb62-28" aria-hidden="true" tabindex="-1"></a><span class="kw">size</span>(small)) <span class="bn">xcommon</span> <span class="bn">ycommon</span></span></code></pre></div>
<p><img src="images/f6_03.png" width="100%" style="display: block; margin: auto;" /></p>
<p>Here, we see that women who planned to adopt a method within 1 year following the Phase 1 interview were significantly quicker to begin using one compared to women who had no such plans (except within the first few months for women in Nigeria, where this difference was not statistically significant).</p>
<p>Finally, let’s consider the interaction reported in <code>interact_1</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 1, failure <span class="kw">by</span>(interact_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Burkina Faso, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="co">///</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="co">///</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a><span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="co">///</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span>(9 <span class="st">&quot;No need; No plan&quot;</span> 10 <span class="st">&quot;No need; Plan 1yr&quot;</span> 11 <span class="st">&quot;Unmet need; No plan&quot;</span> <span class="co">///</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>12 <span class="st">&quot;Unmet need; Plan 1yr&quot;</span> )) <span class="bn">name</span>(hm1, <span class="kw">replace</span>) <span class="co">///</span></span>
<span id="cb63-8"><a href="#cb63-8" aria-hidden="true" tabindex="-1"></a><span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb63-9"><a href="#cb63-9" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb63-10"><a href="#cb63-10" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 2, failure <span class="kw">by</span>(interact_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb63-11"><a href="#cb63-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(DR Congo, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb63-12"><a href="#cb63-12" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="co">///</span></span>
<span id="cb63-13"><a href="#cb63-13" aria-hidden="true" tabindex="-1"></a><span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb63-14"><a href="#cb63-14" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="co">///</span></span>
<span id="cb63-15"><a href="#cb63-15" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span>(9 <span class="st">&quot;No need; No plan&quot;</span> 10 <span class="st">&quot;No need; Plan 1yr&quot;</span> 11 <span class="st">&quot;Unmet need; No plan&quot;</span> <span class="co">///</span></span>
<span id="cb63-16"><a href="#cb63-16" aria-hidden="true" tabindex="-1"></a>12 <span class="st">&quot;Unmet need; Plan 1yr&quot;</span> )) <span class="bn">name</span>(hm2, <span class="kw">replace</span>) <span class="co">///</span></span>
<span id="cb63-17"><a href="#cb63-17" aria-hidden="true" tabindex="-1"></a><span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb63-18"><a href="#cb63-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-19"><a href="#cb63-19" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 7, failure <span class="kw">by</span>(interact_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb63-20"><a href="#cb63-20" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Kenya, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb63-21"><a href="#cb63-21" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="co">///</span></span>
<span id="cb63-22"><a href="#cb63-22" aria-hidden="true" tabindex="-1"></a><span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb63-23"><a href="#cb63-23" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="co">///</span></span>
<span id="cb63-24"><a href="#cb63-24" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span>(9 <span class="st">&quot;No need; No plan&quot;</span> 10 <span class="st">&quot;No need; Plan 1yr&quot;</span> 11 <span class="st">&quot;Unmet need; No plan&quot;</span> <span class="co">///</span></span>
<span id="cb63-25"><a href="#cb63-25" aria-hidden="true" tabindex="-1"></a>12 <span class="st">&quot;Unmet need; Plan 1yr&quot;</span> )) <span class="bn">name</span>(hm3, <span class="kw">replace</span>) <span class="co">///</span></span>
<span id="cb63-26"><a href="#cb63-26" aria-hidden="true" tabindex="-1"></a><span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb63-27"><a href="#cb63-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-28"><a href="#cb63-28" aria-hidden="true" tabindex="-1"></a><span class="kw">sts</span> <span class="kw">graph</span> <span class="kw">if</span> co == 9, failure <span class="kw">by</span>(interact_1 ) <span class="kw">ylabel</span>(0(.2)1.0, angle(0)) <span class="co">///</span></span>
<span id="cb63-29"><a href="#cb63-29" aria-hidden="true" tabindex="-1"></a><span class="kw">ci</span> <span class="bn">title</span>(Nigeria, <span class="kw">size</span>(small)) graphregion(<span class="kw">color</span>(<span class="bn">white</span>))  <span class="co">///</span></span>
<span id="cb63-30"><a href="#cb63-30" aria-hidden="true" tabindex="-1"></a><span class="kw">yline</span>(1,lcolor(<span class="bn">ltblue</span>*.5) lwidth(thin)) <span class="co">///</span></span>
<span id="cb63-31"><a href="#cb63-31" aria-hidden="true" tabindex="-1"></a><span class="bn">legend</span>(<span class="kw">size</span>(small) symxsize(small) <span class="co">///</span></span>
<span id="cb63-32"><a href="#cb63-32" aria-hidden="true" tabindex="-1"></a>symysize(small) region(lcolor(<span class="kw">none</span>)) <span class="co">///</span></span>
<span id="cb63-33"><a href="#cb63-33" aria-hidden="true" tabindex="-1"></a><span class="kw">order</span>(9 <span class="st">&quot;No need; No plan&quot;</span> 10 <span class="st">&quot;No need; Plan 1yr&quot;</span> 11 <span class="st">&quot;Unmet need; No plan&quot;</span> <span class="co">///</span></span>
<span id="cb63-34"><a href="#cb63-34" aria-hidden="true" tabindex="-1"></a> 12 <span class="st">&quot;Unmet need; Plan 1yr&quot;</span> )) <span class="bn">name</span>(hm4, <span class="kw">replace</span>) <span class="co">///</span></span>
<span id="cb63-35"><a href="#cb63-35" aria-hidden="true" tabindex="-1"></a> <span class="bn">xtitle</span>(Months After Phase 1 Interview, <span class="kw">size</span>(small))</span>
<span id="cb63-36"><a href="#cb63-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-37"><a href="#cb63-37" aria-hidden="true" tabindex="-1"></a>grc1leg  hm1 hm2 hm3 hm4, <span class="bn">rows</span>(2) graphregion(<span class="kw">color</span>(<span class="bn">white</span>)) <span class="bn">legend</span>(hm1) <span class="co">///</span></span>
<span id="cb63-38"><a href="#cb63-38" aria-hidden="true" tabindex="-1"></a><span class="bn">title</span>(Predicted Time to FP Adoption <span class="kw">by</span> Phase 1 Intentions and Unmet Need, <span class="co">///</span></span>
<span id="cb63-39"><a href="#cb63-39" aria-hidden="true" tabindex="-1"></a><span class="kw">size</span>(small)) <span class="bn">xcommon</span> <span class="bn">ycommon</span></span></code></pre></div>
<p><img src="images/f6_04.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The interaction between <a href="https://pma.ipums.org/pma-action/variables/UNMETYN#codes_section">unmetyn_1</a> and <a href="https://pma.ipums.org/pma-action/variables/FPPLANYR#codes_section">fpplanyr_1</a> seems to confirm at least one of our hypotheses: non-users who had no unmet need and no plans to adopt a method within the year (those portrayed with the blue lines) were significantly slower to do so (again, except for the first few months shown in Nigeria). Women without plans to adopt a method were also somewhat slower to adopt a method if they experienced unmet need, but there are considerable differences in the strength of this finding across countries and over the length of the calendar period. Overall, women who planned to adopt a method were significantly quicker to do so, but the mitigating effects of unmet need are generally unclear.</p>
</div>
</div>
</div>
</div>



<script>
// when the page is about to reload via servr, remember the scroll position
document.addEventListener('servr:reload', function(e) {
  sessionStorage.setItem('pagedown-scroll', window.scrollY);
});
</script>
</body>
</html>
